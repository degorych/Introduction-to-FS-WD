<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport"
					content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>WD_PS2 Javascript (Basics)</title>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div class="1task">
			<h2>1. Я считаю сумму чисел от "-1000" до "1000"</h2>
			<form action="">
				<input id="minNum" type="number" value="-1000"/>
				<input id="maxNum" type="number" value="1000"/>
				<input type="button" value="Считать" onclick="summa()"/>
				<div class="result">
					<label>Результат:&nbsp;</label>
					<output id="summ">&nbsp 0</output>
				</div>
			</form>
		</div>
		<div class="2task">
			<h2>2. Я считаю сумму чисел, оканчивающихся на 2, 3, 7</h2>
			<form action="">
				<div class="result">
					<label>Результат:&nbsp;</label>
					<output id="summ-2-3-7">&nbsp 0</output>
				</div>
			</form>
		</div>
		<div class="3task">
			<h2>3. Я рисую картинку из <input id="number-of-stars" type="number" value="50"/>звезд</h2>
			<input type="button" value="Нарисовать" onclick="createStarImg()"/>
			<div id="star-img"></div>
		</div>
		<div class="4task">
			<h2>4. Я перевожу секунды в часы и минуты</h2>
			<form action="">
				<input id="user-sec" type="number" value="0"/>
				<input type="button" value="Перевести" onclick="colculateDate()"/>
				<div class="result">
					<label>Результат:&nbsp;</label>
					<output id="sec-to-hours">00:00:00</output>
				</div>
			</form>
		</div>
		<div class="5task">
			<h2>5. Я вывожу возраст студентов</h2>
			<form action="">
				<input id="student-year" type="number" value="0"/>
				<input type="button" value="Перевести" onclick="getStudentsYear()"/>
				<div class="result">
					<output id="student-year-string">0 &nbsp лет</output>
				</div>
			</form>
		</div>
		<div class="6task">
			<h2>6. Я считаю промежуток времени между датами</h2>
			<form action="">
				<input type="text" id="1data" value="October 13, 2014 11:13:00"/>
				<input type="text" id="2data" value="October 14, 2014 11:13:00"/>
				<input type="button" value="Считать" onclick="getUserDate()"/>
				<div class="result">
					<label>Между датами прошло:&nbsp</label>
					<output id="time-between-dates">...</output>
				</div>
			</form>
		</div>
		<div class="7task">
			<h2>7. Я вывожу знак зодиака</h2>
			<form action="">
				<input type="text" id="zodiac-date" placeholder="Дата в формате 2014-12-31"/>
				<input type="button" value="Вывести" onclick="zodiac()"/>
				<div class="result">
					<label>Ваш знак зодиака:&nbsp</label>
					<output id="user-zodiac">...</output>
				</div>
			</form>
		</div>
		<div class="8task">
			<h2>8. Я рисую шахматные доски</h2>
			<input type="text" id="chess-size" placeholder="Размер в виде 4х4"/>
			<input type="button" value="Считать" onclick="chessPaint()"/>
			<div id="chess-board"></div>
		</div>
		<div class="9task">
			<h2>9. Я определяю номер подъезда и этаж по номеру квартиры</h2>
			<form action="">
				<label>Этажей в доме:&nbsp</label>
				<input type="number" id="number-floors" value="1"/>
				<label>Квартир в пролете:&nbsp</label>
				<input type="number" id="number-apartments" value="1""/>
				<label>Подъездов в доме:&nbsp</label>
				<input type="number" id="number-entrances" value="1"/>
				<label>Какую квартиру найти:&nbsp</label>
				<input type="number" id="user-apartments" value="1"/>
				<input type="button" value="Считать" onclick="countFloorsAndEntrances()"/>
				<div class="result">
					<output id="apartments-to-floors-and-entrances"></output>
				</div>
			</form>
		</div>
		<div class="10task">
			<h2>10. Я вывожу сумму цифр числа</h2>
			<form action="">
				<input type="number" id="user-number" value="1234"/>
				<input type="button" value="Считать" onclick="countNumber()"/>
				<div class="result">
					<output id="setNumSum"></output>
				</div>
			</form>
		</div>
		<div class="11task">
			<h2>11. Я форматирую и сортирую ссылки</h2>
			<form action="">
				<textarea id="links" onchange="formatLinks()"></textarea>
				<output id="set-links"></output>
			</form>
		</div>
	</body>
	<script>

      function checkUserData(value, regex, upLimit, downLimit) {
					if (parseInt(value)<downLimit || parseInt(value)>upLimit) {
							return "limitError";
					}

          if (value.toString().match(regex) != null) {
							return 1;
          }

          else {
					    return -1;
          }
      }

      function getTextForDate(dateValue, textArray, innerId) {

          /* --- for 10, 11, 12,...,19 and 110,...,119,... --- */
          if (("0"+dateValue).slice(-2, -1) == 1) {
              document.getElementById(innerId).innerHTML += parseInt(dateValue)+textArray[0];
          }

          /* --- for other --- */
          else {
              document.getElementById(innerId).innerHTML += parseInt(dateValue)+textArray[parseInt(("0"+dateValue).slice(-1))];
          }
      }

      /*--- Task 1, Task 2 ---*/

      function summa() {
          var minNum = document.getElementById("minNum").value;
          var maxNum = document.getElementById("maxNum").value;
          var regexp = /[^-?\d]/;

          if (checkUserData(minNum, regexp, 1000, -1000) == 1 || checkUserData(maxNum, regexp, 1000, -1000) == 1) {
              document.getElementById("summ").innerHTML = "Your data may by number";
              document.getElementById("summ-2-3-7").innerHTML = "Your data may by number";
              return;
          }
          if (checkUserData(minNum, regexp, 1000, -1000) == "limitError" || checkUserData(maxNum, regexp, 1000, -1000) == "limitError") {
							document.getElementById("summ").innerHTML = "Enter number from -1000 to 1000";
							document.getElementById("summ-2-3-7").innerHTML = "Enter number from -1000 to 1000";
              return;
          }

          minNum = parseInt(minNum);
          maxNum = parseInt(maxNum);

          var result = 0;
          var result237 = 0;

          for (minNum; minNum<=maxNum; minNum++) {
              result = result + minNum;
              if (minNum.toString().slice(-1) == 2 || minNum.toString().slice(-1) == 3 || minNum.toString().slice(-1) == 7) {
                  result237 = result237 + minNum;
              }
          }

          document.getElementById("summ").value = result;
          document.getElementById("summ-2-3-7").value = result237;
      }

      /* --- Task 3 ---*/

      function createStarImg() {
          document.getElementById("star-img").innerHTML = "";

          var i, j;
          var n = document.getElementById("number-of-stars").value;
          var regexp = /\D/;

          if (checkUserData(n, regexp, 100, 0) == 1) {
              document.getElementById("star-img").innerHTML = "Your data may by number";
              return;
          }
          if (checkUserData(n, regexp, 100, 0) == "limitError") {
              document.getElementById("star-img").innerHTML = "Enter number from 0 to 100";
              return;
          }

          n = parseInt(n);

          for (i=1; n>0; i++) {
              for (j=1; j<=i && n>0; j++) {
                  document.getElementById("star-img").innerHTML += "*";
                  n--;
              }
              document.getElementById("star-img").innerHTML += "<br>";
          }
      }

      /*--- Task 4 ---*/

      function secondToHours(numSec) {
          var date = new Date(2018, 1);
          var dateOptions = {
              hour: "numeric",
              minute: "numeric",
              second: "numeric"
          };

          date.setSeconds(numSec);

          if (date.getHours()<10) {
              document.getElementById("sec-to-hours").innerHTML = "0"+date.toLocaleString("ru", dateOptions);
          }
          else {
              document.getElementById("sec-to-hours").innerHTML = date.toLocaleString("ru", dateOptions);
          }
      }

      function colculateDate() {
          var secunda = document.getElementById("user-sec").value;
          var regexp = /\D/;

          if (checkUserData(secunda, regexp) == 1) {
              document.getElementById("sec-to-hours").innerHTML = "Your data may by number";
              return;
          }

          secondToHours(secunda);
      }

      /*--- Task 5 ---*/

      function getStudentsYear() {
          var yearVariables = [" лет ", " год ", " года ", " года ", " года ", " лет ", " лет ", " лет ", " лет ", " лет "];
          var getStudentYear = document.getElementById("student-year").value;
          var regexp = /\D/;

          if (checkUserData(getStudentYear, regexp) == 1) {
              document.getElementById("student-year-string").innerHTML = "Your data may by number";
              return;
          }

          document.getElementById("student-year-string").innerHTML = "";
          getTextForDate(getStudentYear, yearVariables, "student-year-string");
      }

      /* --- Task 6 --- */

      function getUserDate() {
          document.getElementById("time-between-dates").innerHTML = "";

          var fDate = new Date(Date.parse(document.getElementById("1data").value));
          var sDate = new Date(Date.parse(document.getElementById("2data").value));

          sDate.setSeconds(sDate.getSeconds()-fDate.getSeconds());
          sDate.setMinutes(sDate.getMinutes()-fDate.getMinutes());
          sDate.setHours(sDate.getHours()-fDate.getHours());
          sDate.setDate(sDate.getDate()-fDate.getDate());
          sDate.setMonth(sDate.getMonth()-fDate.getMonth());
          sDate.setFullYear(sDate.getFullYear()-fDate.getFullYear());

          sDate.setMinutes(sDate.getMinutes() + (sDate.getTimezoneOffset())*(-1)); // Convert to  UTC timezone.

          var timeBetweenDates = sDate.toISOString().split(/[\s-T.:/]+/);
          timeBetweenDates[1] -= 1; // In ISO view mount contain from 1 to 12 values.


          var dateText = [
              [" лет ", " год ", " года ", " года ", " года ", " лет ", " лет ", " лет ", " лет ", " лет "],
              [" месяцев ", " месяц ", " месяца ", " месяца ", " месяца ", " месяцев ", " месяцев ", " месяцев ", " месяцев ", " месяцев "],
              [" дней ", " день ", " дня ", " дня ", " дня "," дней ", " дней ", " дней ", " дней ", " дней "],
              [" часов ", " час ", " часа ", " часа ", " часа ", " часов ", " часов ", " часов ", " часов ", " часов "],
              [" минут ", " минута ", " минуты ", " минуты ", " минуты ", " минут ", " минут ", " минут ", " минут ", " минут "],
							[" секунд ", " секунда ", " секунды ", " секунды ", " секунды ", " секунд ", " секунд ", " секунд ", " секунд ", " секунд "]
					];

					var i;
					for (i=0; i<6; i++) {
              getTextForDate(timeBetweenDates[i], dateText[i], "time-between-dates");
					}
      }

      /* --- Task 7 --- */

      function zodiac() {
					var zodiacArr = [
					    [new Date("2000-01-20"), new Date("2000-02-18"), "&#9810;", "Водолей"],
              [new Date("2000-02-19"), new Date("2000-03-20"), "&#9811;", "Рыбы"],
              [new Date("2000-03-21"), new Date("2000-04-19"), "&#9800;", "Овен"],
              [new Date("2000-04-20"), new Date("2000-05-20"), "&#9801;", "Телец"],
              [new Date("2000-05-21"), new Date("2000-06-20"), "&#9802;", "Близнецы"],
              [new Date("2000-06-21"), new Date("2000-07-22"), "&#9803;", "Рак"],
              [new Date("2000-07-23"), new Date("2000-08-22"), "&#9804;", "Лев"],
              [new Date("2000-08-23"), new Date("2000-09-22"), "&#9805;", "Дева"],
              [new Date("2000-09-23"), new Date("2000-10-22"), "&#9806;", "Весы"],
              [new Date("2000-10-23"), new Date("2000-11-21"), "&#9807;", "Скорпион"],
              [new Date("2000-11-22"), new Date("2000-12-21"), "&#9808;", "Стрелец"],
              [new Date("2000-12-22"), new Date("2001-01-19"), "&#9809;", "Козерог"]
					];

					var getUserDate = document.getElementById("zodiac-date").value;
          var regexp = /^\d{4}-\d{2}-\d{2}$/;

          if (checkUserData(getUserDate, regexp) == -1) {
              document.getElementById("user-zodiac").innerHTML = "Your date may be in 2018-03-27 format";
              return;
          }

					var userDate = new Date(getUserDate);
					userDate.setFullYear(2000);

					if (userDate >= zodiacArr[userDate.getMonth()][0] && userDate <= zodiacArr[userDate.getMonth()][1]) {
					    document.getElementById("user-zodiac").innerHTML = zodiacArr[userDate.getMonth()][2]+" "+zodiacArr[userDate.getMonth()][3];
					}

					else {
              document.getElementById("user-zodiac").innerHTML = zodiacArr[userDate.getMonth()-1][2]+" "+zodiacArr[userDate.getMonth()-1][3];
					}
      }

      /* --- Task 8 --- */

      function chessPaint() {
          document.getElementById("chess-board").innerHTML = "";

					var chessSize = document.getElementById("chess-size").value;
          var regexp = /^\d+x\d+$/;

          if (checkUserData(chessSize, regexp) == -1) {
              document.getElementById("chess-board").innerHTML = "Your data may be in 4x4 format";
              return;
          }

          chessSize = chessSize.split("x");
					var i, j;
          var currentChesRow;

					for (i=0; i<chessSize[0]; i++) {
					    if ((i+1)%2 != 0) {
					        document.getElementById("chess-board").innerHTML += "<div class='first-str'>"
							}
							else {
                  document.getElementById("chess-board").innerHTML += "<div class='second-str'>"
							}

              currentChesRow = document.querySelector("div#chess-board > div:last-child");

							for (j=0; j<chessSize[1]; j++) {
                  currentChesRow.innerHTML += "<div></div>"
							}
					}
      }

      /* --- Task 9 --- */

      function countFloorsAndEntrances() {
					var getFloors = parseInt(document.getElementById("number-floors").value);
					var getApartments = parseInt(document.getElementById("number-apartments").value);
					var getEntrances = parseInt(document.getElementById("number-entrances").value);
					var getUserApartments = parseInt(document.getElementById("user-apartments").value);
          var regexp = /\D/;

          if (checkUserData(getFloors, regexp) == 1 || checkUserData(getApartments, regexp) == 1 || checkUserData(getEntrances, regexp) == 1 || checkUserData(getUserApartments, regexp) == 1) {
              document.getElementById("apartments-to-floors-and-entrances").innerHTML = "Your data may be number";
              return;
          }

					if (getUserApartments>(getEntrances*getFloors*getApartments)) {
              document.getElementById("apartments-to-floors-and-entrances").innerHTML = "В доме нет такой квартиры";
              return;
					}

					document.getElementById("apartments-to-floors-and-entrances").innerHTML = "Подъезд: "+Math.ceil(getUserApartments/(getFloors*getApartments));

					while (getUserApartments>(getFloors*getApartments)) {
              getUserApartments = getUserApartments - (getFloors*getApartments);
					}

          document.getElementById("apartments-to-floors-and-entrances").innerHTML += ", Этаж: "+Math.ceil(getUserApartments/getApartments);
      }

      /* --- Task 10 --- */

      function countNumber() {
					var getUserNumber = document.getElementById("user-number").value;
          var regexp = /\D/;

          if (checkUserData(getUserNumber, regexp) == 1) {
              document.getElementById("setNumSum").innerHTML = "Your data may be number";
              return;
          }

					getUserNumber = getUserNumber.split("");

					var summa = 0;
					var getUserNumberLens = getUserNumber.length;
					var i;

					for (i=0; i<getUserNumberLens; i++) {
					    summa = summa + parseInt(getUserNumber[i]);
					}

					document.getElementById("setNumSum").innerHTML = "Сумма чисел: "+summa;
      }

      /* --- Task 11 --- */

      function formatLinks() {
					var getLinks = document.getElementById("links").value.split(/[\s,]/);
          var getLinksLens = getLinks.length;

					var i;
					for (i=0; i<getLinksLens; i++) {
					    if (getLinks[i] == "") {
                  getLinks.splice(i, 1);
					        i--;
							}
					}

          if (!document.getElementById("link-list")) {
              var newLinkList = document.createElement("ul");
              newLinkList.id = "link-list";
              document.getElementById("set-links").appendChild(newLinkList);
					}
					else {
              document.getElementById("link-list").innerHTML = "";
					}

          getLinks.sort(function(a,b){return a.replace(/https?:\/\//g, "") > b.replace(/https?:\/\//g, "")});

					for (i=0, getLinksLens = getLinks.length; i<getLinksLens; i++) {
              document.getElementById("link-list").innerHTML += '<li><a href="'+getLinks[i]+'">'+getLinks[i].replace(/https?:\/\//, "")+'</a></li>';
					}

          document.getElementById("links").value = getLinks.toString().replace(/https?:\/\//g, " ");
      }
	</script>
</html>
